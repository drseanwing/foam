# FOAM N8N Monitoring Configuration
# Copy this to your main .env file or merge with existing configuration
# Version: 1.0.0

# =============================================================================
# GRAFANA CONFIGURATION
# =============================================================================

# Grafana admin credentials
# SECURITY: Use a strong password (minimum 20 characters recommended)
# Generate secure password: openssl rand -base64 32 | tr -d "=+/" | cut -c1-32
# Example format: Ab3$xK9#mP2@nQ7&rT5!vW8*yZ1^cD4%
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=REPLACE_WITH_STRONG_PASSWORD_MIN_20_CHARS

# Domain for Traefik routing (if using reverse proxy)
# Leave as 'localhost' for local development
DOMAIN=localhost

# =============================================================================
# PROMETHEUS CONFIGURATION
# =============================================================================

# Data retention (default: 30 days)
# Uncomment and adjust in docker-compose.monitoring.yml if needed
# PROMETHEUS_RETENTION=30d

# =============================================================================
# ALERTING CONFIGURATION (Optional)
# =============================================================================

# Uncomment and configure if using Alertmanager
# ALERTMANAGER_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# ALERTMANAGER_EMAIL_TO=alerts@your-domain.com
# ALERTMANAGER_EMAIL_FROM=prometheus@your-domain.com
# ALERTMANAGER_SMTP_HOST=smtp.gmail.com:587
# ALERTMANAGER_SMTP_USER=your-email@gmail.com
# ALERTMANAGER_SMTP_PASSWORD=your-app-password

# =============================================================================
# POSTGRES EXPORTER CONFIGURATION
# =============================================================================

# These should match your main PostgreSQL configuration
# Usually inherited from main .env file
# POSTGRES_USER=n8n
# POSTGRES_PASSWORD=your_postgres_password

# =============================================================================
# ADVANCED OPTIONS
# =============================================================================

# Custom scrape intervals (seconds)
# PROMETHEUS_SCRAPE_INTERVAL=15
# PROMETHEUS_EVALUATION_INTERVAL=15

# Enable/disable specific exporters
# ENABLE_NODE_EXPORTER=true
# ENABLE_CADVISOR=true
# ENABLE_POSTGRES_EXPORTER=true

# Grafana plugins (comma-separated)
# GRAFANA_INSTALL_PLUGINS=grafana-piechart-panel,grafana-clock-panel

# =============================================================================
# SECURITY NOTES
# =============================================================================

# ⚠️  CRITICAL SECURITY REQUIREMENTS ⚠️
#
# 1. NEVER use default/example passwords in production
# 2. GRAFANA_ADMIN_PASSWORD is REQUIRED - no default is provided
# 3. Use strong, unique passwords (minimum 20 characters recommended)
#    - Include uppercase, lowercase, numbers, and special characters
#    - Generate with: openssl rand -base64 32 | tr -d "=+/" | cut -c1-32
# 4. For production, use secrets management (Docker secrets, Vault, etc.)
# 5. Restrict network access to monitoring services
# 6. Enable TLS/HTTPS for all web interfaces
# 7. Regularly rotate credentials (every 90 days minimum)
# 8. Use read-only database credentials for exporters when possible
# 9. Protect .env file permissions: chmod 600 .env
# 10. NEVER commit .env to version control - use .gitignore

# =============================================================================
# QUICK START
# =============================================================================

# 1. Copy this file to .env or merge with existing .env:
#    cp .env.monitoring.example .env
#
# 2. Update GRAFANA_ADMIN_PASSWORD and other credentials
#
# 3. Run setup script:
#    ./scripts/setup-monitoring.sh
#
# 4. Access Grafana at http://localhost:3000
#    (or https://grafana.${DOMAIN} if configured)
#
# 5. Default dashboard: "FOAM N8N System Overview"

# =============================================================================
# TROUBLESHOOTING
# =============================================================================

# View logs:
#   docker compose -f docker-compose.monitoring.yml logs -f
#
# Check service status:
#   docker compose -f docker-compose.monitoring.yml ps
#
# Restart monitoring stack:
#   docker compose -f docker-compose.monitoring.yml restart
#
# Stop monitoring:
#   docker compose -f docker-compose.monitoring.yml down
#
# Full reset (WARNING: deletes all metrics data):
#   docker compose -f docker-compose.monitoring.yml down -v

# =============================================================================
# RESOURCE REQUIREMENTS
# =============================================================================

# Minimum recommended resources for monitoring stack:
#
# - Prometheus: 512MB RAM, 10GB storage
# - Grafana: 256MB RAM, 1GB storage
# - Node Exporter: 64MB RAM
# - Postgres Exporter: 128MB RAM
# - cAdvisor: 128MB RAM
#
# Total: ~1GB RAM, ~12GB storage
#
# For production with high traffic:
# - Prometheus: 2-4GB RAM, 50-100GB storage
# - Grafana: 512MB-1GB RAM

# =============================================================================
# DATA RETENTION GUIDELINES
# =============================================================================

# Development: 7-15 days (saves storage)
# Staging: 30 days (default)
# Production: 90 days (recommended)
# Long-term archival: Use remote storage (Thanos, Cortex, etc.)
